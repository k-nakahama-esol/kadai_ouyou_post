# 課題レベル１

pythonでスクリプトをかく。  

# 内容：  

標準入力から受け取った文字列を、標準出力に出す。  

## 基礎編
```python
text = input("文字列を入力してください：")
print("入力された文字列は、", text, "です。")

# 文字列を入力してください：abcdefg
# 入力された文字列は、 abcdefg です。
```

## 応用編
```python
import os

# print関数をオーバーライドして、文字コードをcp932に変換して出力する
def print(msg):
    msg = 'myprint: ' + msg + '\n'
    os.write(1, msg.encode('cp932'))

# input関数をオーバーライドして、文字コードをcp932に変換して入力する
def input(pronmpt=''):
    print("myinput")
    os.write(1, pronmpt.encode('cp932'))    # プロンプトを表示
    buf = b''
    while True:
        ch = os.read(0, 1)                  # 標準入力から1バイト読み込む
        if ch == b'\n' or ch == b'\r':      # 改行コードが来たら終了
            break
        else:
            buf += ch                       # 読み込んだバイトをバッファに追加
    return buf.decode('cp932')


text = input("文字列を入力してください：")
print(f"入力された文字列は、{text}です。")

# myprint: myinput
# 文字列を入力してください：abcdefg
# myprint: 入力された文字列は、abcdefgです。

```

---- 
# 解説
標準出力・標準入力とは、OSが用意している入出力の仕組みで、プログラムが文字やデータを入出力するときに使います。
データを入れたり出したりするための穴のようなものです。　通常、この穴は、キーボードや画面に接続されていますが
「 パイプ 」や「 リダイレクト 」と組み合わせることで、他のプログラムと接続することもできます。

しかして、その正体はというと、OSが用意しているファイルディスクリプタというものです。  
ファイルディスクリプタとは、OSが管理するファイルやデバイスを識別するための番号です。  
プログラムは、ファイルディスクリプタを使って、OSに対して入出力を要求します。  
例えば、プログラムがあるファイルを開きたいとき、OSに「 このファイルを開いてください 」とお願いします。
すると、OSはそのファイルに対して一意の番号を割り当ててくれます。  

「 さっき言ってたファイル、開いておいたぜ。 123番 の番号を割り当てておいてから、この番号を言ってくれれば、ファイルの内容を読んだり書いたりできるからな？」

という具合でありまして、この番号のことを「 ファイルディスクリプタ 」と呼びます。
プログラムは、この番号を使って、ファイルを開いたり、閉じたり、読み書きしたりします。  
プログラムが起動する時、指示しなくてもOSが勝手に用意してくれるファイルディスクリプタが3つあります。
それが、標準入力、標準出力、標準エラー出力です。
それぞれ、下記のように番号が割り当てられます。

## 特別なファイルディスクリプタ
名前    | ファイルディスクリプタ | 目的 
--------|----------------------|----------------
標準入力  | 0                    | キーボードからの入力を受け取る
標準出力 | 1                    | 画面に出力する
標準エラー出力 | 2                    | エラーメッセージを画面に出力する

つまり、我々は input 関数や print 関数を使うことで、OSが用意してくれたファイルディスクリプタを使って、標準入力や標準出力にアクセスしているわけです。  
逆説的に言うと、input 関数や print 関数を使わなくても、OSが用意してくれたファイルディスクリプタを直接操作することで、標準入力や標準出力にアクセスすることもできます。  
それを実際にやったのが、このプログラムです。  
（普通はこんなことしませんが・・・、こんなこともできるんだー。程度に読んでみてください）  

もっとも重要な点は、この仕組みは python の仕組みではなく OS の仕組みであるということです。  
つまり、python だけでなく、C や Java などの他のプログラミング言語でも同じように標準入力や標準出力を扱うことができます。  
たとえば、C言語ならこんな感じ・・・。  

```c
#include <unistd.h>
int main() {
    char *buf = "Hello, world!\n";
    write(1, buf, 14); // 標準出力に書き込む
    return 0;
}
```